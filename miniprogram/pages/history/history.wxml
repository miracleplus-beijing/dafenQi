<!-- 历史记录页面 -->
<view class="history-container">
  <!-- 空状态 -->
  <view class="empty-state" wx:if="{{historyList.length === 0}}">
    <image src="https://gxvfcafgnhzjiauukssj.supabase.co/storage/v1/object/public/icons/history.svg" class="empty-icon"></image>
    <text class="empty-text">暂无播放历史</text>
    <text class="empty-desc">听过的内容会显示在这里</text>
  </view>

  <!-- 历史列表 -->
  <view class="history-list" wx:else>
    <view wx:for="{{historyList}}" wx:key="id" class="history-item" 
          bindtap="playHistoryItem" data-item="{{item}}">
      <view class="item-cover">
        <image src="{{item.cover || 'https://gxvfcafgnhzjiauukssj.supabase.co/storage/v1/object/public/pictures/default-cover.png'}}" 
               class="cover-image" mode="aspectFill"></image>
        <view class="play-overlay">
          <image src="https://gxvfcafgnhzjiauukssj.supabase.co/storage/v1/object/public/static-images/icons/play-small.svg" class="play-icon"></image>
        </view>
      </view>
      
      <view class="item-info">
        <text class="item-title">{{item.title}}</text>
        <text class="item-channel">{{item.channel}}</text>
        <view class="item-meta">
          <text class="play-time">{{item.playTimeText}}</text>
          <text class="duration">{{item.duration || '00:00'}}</text>
        </view>
      </view>
      
      <view class="item-actions">
        <view class="action-btn" bindtap="removeFromHistory" 
              data-id="{{item.id}}" catchtap="true">
          <image src="https://gxvfcafgnhzjiauukssj.supabase.co/storage/v1/object/public/icons/delete.svg" class="action-icon"></image>
        </view>
      </view>
    </view>
  </view>

  <!-- 底部操作 -->
  <view class="bottom-actions" wx:if="{{historyList.length > 0}}">
    <button class="clear-btn" bindtap="clearAllHistory">清空历史记录</button>
  </view>
</view>