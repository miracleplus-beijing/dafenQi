<!-- 榜单详情页面 -->
<view class="container">
  <!-- 背景光效 -->
  <view class="bg-glow bg-glow-1"></view>
  <view class="bg-glow bg-glow-2"></view>

  <!-- Header -->
  <view class="header">
    <view class="search-bar">
      <view class="search-input-wrapper">
        <image src="https://gxvfcafgnhzjiauukssj.supabase.co/storage/v1/object/public/static-images/icons/search.svg" class="search-icon" alt="Search"></image>
        <input type="text" class="search-input" placeholder="听你想听的论文" placeholder-class="search-placeholder"
               value="{{searchValue}}" bindinput="onSearchInput" />
      </view>
    </view>
    
    <view class="tab-nav">
      <view class="tab {{currentTab === 'hot' ? 'active' : ''}}" 
            data-tab="hot" bindtap="switchTab">最热榜</view>
      <view class="tab {{currentTab === 'new' ? 'active' : ''}}" 
            data-tab="new" bindtap="switchTab">最新榜</view>
      <view class="tab {{currentTab === 'review' ? 'active' : ''}}" 
            data-tab="review" bindtap="switchTab">综述榜</view>
    </view>
  </view>

  <!-- 列表内容容器 -->
  <view class="content-wrapper">
    <!-- 最热榜内容 -->
    <view wx:if="{{currentTab === 'hot'}}" class="tab-content fade-in">
      <view class="ranking-list">
        <view wx:for="{{hotRankings}}" wx:key="id" class="ranking-item glass-card">
          <view class="ranking-index index-{{index + 1}}">{{index + 1}}</view>
          <image src="{{item.channel_cover_url}}" class="ranking-cover" mode="aspectFill" alt="{{item.channel}}"></image>
          <view class="ranking-info">
            <view class="ranking-title">{{item.title}}</view>
            <view class="ranking-meta">
              <text class="ranking-channel">{{item.channel}}</text>
              <view class="ranking-stat" wx:if="{{item.play_count}}">
                <text class="stat-icon">▶</text> {{item.play_count}}
              </view>
            </view>
          </view>
          <view class="play-btn" bindtap="playPodcast" data-item="{{item}}">
            <image src="https://gxvfcafgnhzjiauukssj.supabase.co/storage/v1/object/public/static-images/icons/play-small.svg" class="play-icon"></image>
          </view>
        </view>
      </view>
    </view>

    <!-- 最新榜内容 -->
    <view wx:elif="{{currentTab === 'new'}}" class="tab-content fade-in">
      <view class="ranking-list">
        <view wx:for="{{newRankings}}" wx:key="id" class="ranking-item glass-card">
          <view class="ranking-index index-{{index + 1}}">{{index + 1}}</view>
          <image src="{{item.channel_cover_url}}" class="ranking-cover" mode="aspectFill" alt="{{item.channel}}"></image>
          <view class="ranking-info">
            <view class="ranking-title">{{item.title}}</view>
            <view class="ranking-meta">
              <text class="ranking-channel">{{item.channel}}</text>
              <view class="ranking-stat" wx:if="{{item.duration}}">
                <text class="stat-icon">⏱</text> {{item.duration}}
              </view>
            </view>
          </view>
          <view class="play-btn" bindtap="playPodcast" data-item="{{item}}">
            <image src="https://gxvfcafgnhzjiauukssj.supabase.co/storage/v1/object/public/static-images/icons/play-small.svg" class="play-icon"></image>
          </view>
        </view>
      </view>
    </view>

    <!-- 综述榜内容 -->
    <view wx:elif="{{currentTab === 'review'}}" class="tab-content fade-in">
      <view class="ranking-list">
        <view wx:for="{{reviewRankings}}" wx:key="id" class="ranking-item glass-card">
          <view class="ranking-index index-{{index + 1}}">{{index + 1}}</view>
          <image src="{{item.channel_cover_url}}" class="ranking-cover" mode="aspectFill" alt="{{item.channel}}"></image>
          <view class="ranking-info">
            <view class="ranking-title">{{item.title}}</view>
            <view class="ranking-meta">
              <text class="ranking-channel">{{item.channel}}</text>
              <view class="ranking-stat" wx:if="{{item.favorite_count}}">
                <text class="stat-icon">★</text> {{item.favorite_count}}
              </view>
            </view>
          </view>
          <view class="play-btn" bindtap="playPodcast" data-item="{{item}}">
            <image src="https://gxvfcafgnhzjiauukssj.supabase.co/storage/v1/object/public/static-images/icons/play-small.svg" class="play-icon"></image>
          </view>
        </view>
      </view>
    </view>

    <!-- 底部加载区域 -->
    <view class="bottom-loader">
      <image src="https://gxvfcafgnhzjiauukssj.supabase.co/storage/v1/object/public/static-images/icons/loading.svg" class="loader-icon" alt="加载中"></image>
      <view class="loader-text">从源头最大化驱动创新</view>
    </view>
  </view>
</view>