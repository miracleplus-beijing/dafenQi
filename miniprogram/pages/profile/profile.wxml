<!-- 我的页面 -->
<view class="profile-container">
  <!-- 蓝色背景区域 -->
  <view class="blue-bg"></view>

  <!-- 用户区域 -->
  <view class="user-section">
    <view wx:if="{{!isLoggedIn}}" class="login-prompt" bindtap="handleLogin">
      登录/注册>
    </view>
    <view wx:else class="user-info">
      <view class="user-name" bindtap="changeUserName">{{userInfo.nickName || '用户'}}</view>
      <view class="user-id">ID: {{userInfo.id || '未设置'}}</view>
    </view>
    <view class="avatar-container" wx:if="{{isLoggedIn}}">
      <image class="avatar" src="https://gxvfcafgnhzjiauukssj.supabase.co/storage/v1/object/public/static-images/picture/MiraclePlus-Avatar.png" 
             alt="用户头像" mode="aspectFill" bindtap="changeAvatar"></image>
      <view class="avatar-edit-hint">点击更换</view>
    </view>
  </view>

  <!-- 菜单项区域 -->
  <view class="menu-section" wx:if="{{isLoggedIn}}">
    <view class="menu-item" bindtap="handleMenuClick" data-type="history">
      <image src="https://gxvfcafgnhzjiauukssj.supabase.co/storage/v1/object/public/static-images/icons/history.svg" alt="历史" class="menu-icon"></image>
      <text class="menu-text">我的历史</text>
      <image src="https://gxvfcafgnhzjiauukssj.supabase.co/storage/v1/object/public/static-images/icons/right-arrow.svg" alt=">" class="menu-arrow"></image>
    </view>
    
    <view class="menu-item" bindtap="handleMenuClick" data-type="favorites">
      <image src="https://gxvfcafgnhzjiauukssj.supabase.co/storage/v1/object/public/static-images/icons/favorite-selected.svg" alt="收藏" class="menu-icon"></image>
      <text class="menu-text">我的收藏</text>
      <image src="https://gxvfcafgnhzjiauukssj.supabase.co/storage/v1/object/public/static-images/icons/right-arrow.svg" alt=">" class="menu-arrow"></image>
    </view>
    
    <view class="section-divider"></view>
    
    <view class="menu-item" bindtap="handleMenuClick" data-type="share">
      <image src="https://gxvfcafgnhzjiauukssj.supabase.co/storage/v1/object/public/static-images/icons/share.svg" alt="分享" class="menu-icon"></image>
      <text class="menu-text">分享给朋友</text>
      <image src="https://gxvfcafgnhzjiauukssj.supabase.co/storage/v1/object/public/static-images/icons/right-arrow.svg" alt=">" class="menu-arrow"></image>
    </view>
    
    <view class="menu-item" bindtap="handleMenuClick" data-type="feedback">
      <image src="https://gxvfcafgnhzjiauukssj.supabase.co/storage/v1/object/public/static-images/icons/feedback.svg" alt="反馈" class="menu-icon"></image>
      <text class="menu-text">问题反馈</text>
      <image src="https://gxvfcafgnhzjiauukssj.supabase.co/storage/v1/object/public/static-images/icons/right-arrow.svg" alt=">" class="menu-arrow"></image>
    </view>
    
    <view class="menu-item" bindtap="handleMenuClick" data-type="settings">
      <image src="https://gxvfcafgnhzjiauukssj.supabase.co/storage/v1/object/public/static-images/icons/settings.svg" alt="设置" class="menu-icon"></image>
      <text class="menu-text">设置</text>
      <image src="https://gxvfcafgnhzjiauukssj.supabase.co/storage/v1/object/public/static-images/icons/right-arrow.svg" alt=">" class="menu-arrow"></image>
    </view>

    <view class="section-divider"></view>
    
    <view class="menu-item logout-item" bindtap="handleLogout">
      <image src="https://gxvfcafgnhzjiauukssj.supabase.co/storage/v1/object/public/static-images/icons/logout.svg" alt="登出" class="menu-icon"></image>
      <text class="menu-text logout-text">退出登录</text>
      <image src="https://gxvfcafgnhzjiauukssj.supabase.co/storage/v1/object/public/static-images/icons/right-arrow.svg" alt=">" class="menu-arrow"></image>
    </view>
  </view>

  <!-- 未登录提示 -->
  <view class="login-tips" wx:if="{{!isLoggedIn}}">
    <view class="tips-content">
      <image src="https://gxvfcafgnhzjiauukssj.supabase.co/storage/v1/object/public/static-images/icons/user.svg" class="tips-icon"></image>
      <text class="tips-text">登录后享受更多功能</text>
      <view class="tips-list">
        <text class="tip-item">• 同步收藏和历史记录</text>
        <text class="tip-item">• 个性化推荐内容</text>
        <text class="tip-item">• 跨设备数据同步</text>
      </view>
      <button class="login-btn" bindtap="handleLogin">立即登录</button>
    </view>
  </view>

  <!-- 触摸反馈 -->
  <view class="touch-feedback" wx:if="{{showSwipeIndicator}}">
    <view class="swipe-indicator left {{swipeDirection === 'left' ? 'active' : ''}}"></view>
    <view class="swipe-indicator right {{swipeDirection === 'right' ? 'active' : ''}}"></view>
  </view>
</view>