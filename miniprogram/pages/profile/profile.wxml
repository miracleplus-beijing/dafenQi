<!-- 我的页面 -->
<view class="profile-container">
  <!-- 蓝色背景区域 -->
  <view class="blue-bg"></view>

  <!-- 用户区域 -->
  <view class="user-section">
    <view wx:if="{{!isLoggedIn}}" class="login-prompt" bindtap="handleLogin">
      登录/注册>
    </view>
    <view wx:else class="user-info">
      <view class="user-name" bindtap="changeUserName">{{userInfo.nickName || '用户'}}</view>
      <view class="user-id">ID: {{userInfo.id || '未设置'}}</view>
    </view>
    <view class="avatar-container" wx:if="{{isLoggedIn}}">
      <t-button style="width: 170rpx; height: 170rpx;" width="100" height="100" class="avatar-btn" id="profileChooseAvatarBtn" shape="circle" open-type="chooseAvatar" bind:chooseavatar="onChooseAvatar">
        <t-image width="170rpx" height="170rpx" mode="aspectFill" shape="circle" src="{{userInfo.avatarUrl}}" />
      </t-button>
      <view class="avatar-edit-hint">点击更换</view>
    </view>
  </view>

  <!-- 菜单项区域 -->
  <view class="menu-section" wx:if="{{isLoggedIn}}">
    <t-cell-group>
      <t-cell title="我的历史" arrow bindtap="handleMenuClick" data-type="history">
        <image slot="left-icon" class="menu-icon" src="https://gxvfcafgnhzjiauukssj.supabase.co/storage/v1/object/public/static-images/icons/history.svg" alt="历史" />
      </t-cell>
      <t-cell title="我的收藏" arrow bindtap="handleMenuClick" data-type="favorites">
        <image slot="left-icon" class="menu-icon" src="https://gxvfcafgnhzjiauukssj.supabase.co/storage/v1/object/public/static-images/icons/collection_selected.svg" alt="收藏" />
      </t-cell>
    </t-cell-group>

    <t-cell-group style="margin-top: 12px;">
      <t-cell title="问题反馈" arrow bindtap="handleMenuClick" data-type="feedback">
        <image slot="left-icon" class="menu-icon" src="https://gxvfcafgnhzjiauukssj.supabase.co/storage/v1/object/public/static-images/icons/feedback.svg" alt="反馈" />
      </t-cell>
      <t-cell title="设置" arrow bindtap="handleMenuClick" data-type="settings">
        <image slot="left-icon" class="menu-icon" src="https://gxvfcafgnhzjiauukssj.supabase.co/storage/v1/object/public/static-images/icons/settings.svg" alt="设置" />
      </t-cell>
    </t-cell-group>

    <t-cell-group style="margin-top: 12px;">
      <t-cell title="退出登录" bindtap="handleLogout" class="logout-item">
        <image slot="left-icon" class="menu-icon" src="https://gxvfcafgnhzjiauukssj.supabase.co/storage/v1/object/public/static-images/icons/logout.svg" alt="登出" />
      </t-cell>
    </t-cell-group>
  </view>

  <!-- 未登录提示 -->
  <view class="login-tips" wx:if="{{!isLoggedIn}}">
    <view class="tips-content">
      <image src="https://gxvfcafgnhzjiauukssj.supabase.co/storage/v1/object/public/static-images/icons/user.svg" class="tips-icon"></image>
      <text class="tips-text">登录后享受更多功能</text>
      <view class="tips-list">
        <text class="tip-item">• 同步收藏和历史记录</text>
        <text class="tip-item">• 个性化推荐内容</text>
        <text class="tip-item">• 跨设备数据同步</text>
      </view>
      <t-button theme="primary" block bindtap="handleLogin">立即登录</t-button>
    </view>
  </view>

  <!-- 触摸反馈 -->
  <view class="touch-feedback" wx:if="{{showSwipeIndicator}}">
    <view class="swipe-indicator left {{swipeDirection === 'left' ? 'active' : ''}}"></view>
    <view class="swipe-indicator right {{swipeDirection === 'right' ? 'active' : ''}}"></view>
  </view>



</view>


