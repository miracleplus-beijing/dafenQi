<!-- 我的页面 -->
<view class="profile-container">
  <!-- 用户区域 -->
  <view class="user-section">
    <view wx:if="{{!isLoggedIn}}" class="login-prompt" bindtap="handleLogin">
      登录/注册>
    </view>
    <view wx:else class="user-info">
      <text class="user-name section-title" bindtap="changeUserName">{{userInfo.nickName || '用户'}}</text>
      <text class="user-id">ID: {{userInfo.id || '未设置'}}</text>
    </view>



    <view class="avatar-container" wx:if="{{isLoggedIn}}">
      <t-button style="width: 170rpx; height: 170rpx;" width="100" height="100" class="avatar-btn" id="profileChooseAvatarBtn" shape="circle" open-type="chooseAvatar" bind:chooseavatar="onChooseAvatar">
        <t-image width="170rpx" height="170rpx" mode="aspectFill" shape="circle" src="{{userInfo.avatarUrl}}" />
      </t-button>
      <view class="avatar-edit-hint">点击更换</view>
    </view>
  </view>

  <!-- 菜单项区域 -->
  <view class="menu-section" wx:if="{{isLoggedIn}}">
    <view class="menu-list">
      <view class="menu-item" bindtap="handleMenuClick" data-type="history">
        <text class="menu-text">收听历史</text>
        <text class="menu-arrow">›</text>
      </view>
      <view class="menu-item" bindtap="handleMenuClick" data-type="favorites">
        <text class="menu-text">我的收藏</text>
        <text class="menu-arrow">›</text>
      </view>
      <view class="menu-item" bindtap="handleMenuClick" data-type="comments">
        <text class="menu-text">我的评论</text>
        <text class="menu-arrow">›</text>
      </view>
      <view class="menu-item" bindtap="handleMenuClick" data-type="settings">
        <text class="menu-text">设置</text>
        <text class="menu-arrow">›</text>
      </view>
      <view class="menu-item" bindtap="handleMenuClick" data-type="feedback">
        <text class="menu-text">问题反馈</text>
        <text class="menu-arrow">›</text>
      </view>
    </view>

    <!-- 退出登录按钮 -->
  <view class="logout-btn" bindtap="handleLogout">
    <text class="logout-text">退出登录</text>
  </view>
  </view>

  <!-- 未登录提示 -->
  <view class="login-tips" wx:if="{{!isLoggedIn}}">
    <view class="tips-content">
      <image src="https://gxvfcafgnhzjiauukssj.supabase.co/storage/v1/object/public/static-images/icons/user.svg" class="tips-icon"></image>
      <text class="tips-text">登录后享受更多功能</text>
      <view class="tips-list">
        <text class="tip-item">• 同步收藏和历史记录</text>
        <text class="tip-item">• 个性化推荐内容</text>
        <text class="tip-item">• 跨设备数据同步</text>
      </view>
      <t-button theme="primary" block bindtap="handleLogin">立即登录</t-button>
    </view>
  </view>

  <!-- 触摸反馈 -->
  <view class="touch-feedback" wx:if="{{showSwipeIndicator}}">
    <view class="swipe-indicator left {{swipeDirection === 'left' ? 'active' : ''}}"></view>
    <view class="swipe-indicator right {{swipeDirection === 'right' ? 'active' : ''}}"></view>
  </view>



</view>


