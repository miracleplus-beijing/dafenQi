<!-- Êº´Ê∏∏È°µÈù¢ -->
<view class="browse-page">
  <!-- ‰∏ªË¶ÅÂÜÖÂÆπÂå∫Âüü -->
  <view wx:if="{{!loading && podcastList.length > 0}}">
    <swiper class="browse-swiper" 
            vertical="true" 
            indicator-dots="false"
            indicator-color="rgba(0,0,0,0)"
            indicator-active-color="rgba(0,0,0,0)" 
            autoplay="{{false}}"
            interval="999999"
            circular="false"
            current="{{currentIndex}}"
            duration="300"
            easing-function="easeInOutCubic"
            bindchange="handleSwiperChange"
            bindtouchstart="handleTouchStart"
            bindtouchmove="handleTouchMove">
  <swiper-item wx:for="{{podcastList}}" wx:key="id" class="browse-container">
    <!-- Êí≠ÂÆ¢Â∞ÅÈù¢ -->
    <view class="podcast-cover">
      <view class="cover-placeholder">
        <view class="cover-icon">üéµ</view>
        <view class="cover-title">{{item.title}}</view>
      </view>
      <!-- LoaderÂú®Êí≠ÊîæÊó∂ÊòæÁ§∫ -->
      <view wx:if="{{index === currentIndex && isPlaying}}" 
            class="podcast-loader">
        <view class="loading-spinner"></view>
      </view>
    </view>

    <!-- Êí≠ÂÆ¢‰ø°ÊÅØ -->
    <view class="podcast-info">
      <view class="podcast-title">{{item.title}}</view>
      <view class="podcast-channel" bindtap="handleChannelClick">{{item.channel_name || 'Â•áÁª©ÂâçÊ≤ø‰ø°Âè∑'}}</view>
    </view>

    <!-- ‰∫§‰∫íÊåâÈíÆÂå∫Âüü -->
    <view class="action-buttons">
      <view class="action-btn" bindtap="handleThumbsUp">
        <image src="{{item.isThumbsUp ? cdnImages.thumbsUpActiveIcon : cdnImages.thumbsUpIcon}}" 
               alt="ÁÇπËµû" class="icon"></image>
      </view>
      <view class="action-btn" bindtap="handleLike">
        <image src="{{item.isLiked ? cdnImages.likeActiveIcon : cdnImages.likeIcon}}" 
               alt="ÂñúÊ¨¢" class="icon"></image>
      </view>
      <view class="action-btn" bindtap="handleFavorite">
        <image src="{{item.isFavorited ? cdnImages.favoriteActiveIcon : cdnImages.favoriteIcon}}" 
               alt="Êî∂Ëóè" class="icon"></image>
      </view>
    </view>

    <!-- progress-bar -->
    <view class="progress-container">
      <view class="progress-time-info">
        <text class="current-time">{{currentTimeFormatted}}</text>
        <text class="total-time">{{totalTimeFormatted}}</text>
      </view>
      <view class="progress-bar" bindtap="handleProgressClick">
        <view class="progress-fill" style="width: {{currentProgress}}%"></view>
        <view class="progress-thumb" style="left: {{currentProgress}}%"></view>
      </view>
    </view>

    <!-- Êí≠ÊîæÊéßÂà∂ -->
    <view class="playback-controls">
      <!-- ÂàÜ‰∫´ÊåâÈíÆ -->
      <view class="control-btn" bindtap="handleShare">
        <image src="{{cdnImages.shareIcon}}" alt="ÂàÜ‰∫´" class="icon"></image>
      </view>

      <!-- ÂêéÈÄÄ15Áßí -->
      <view class="control-btn" bindtap="handleRewind">
        <image src="{{cdnImages.rewindIcon}}" alt="ÂêéÈÄÄ15Áßí" class="icon"></image>
      </view>

      <!-- Êí≠Êîæ/ÊöÇÂÅúÊåâÈíÆ -->
      <view class="play-pause-btn" bindtap="handlePlayPause">
        <image src="{{isPlaying ? cdnImages.pauseIcon : cdnImages.playIcon}}" 
               alt="{{isPlaying ? 'ÊöÇÂÅú' : 'Êí≠Êîæ'}}" class="play-pause-icon"></image>
      </view>

      <!-- ÂâçËøõ30Áßí -->
      <view class="control-btn" bindtap="handleFastForward">
        <image src="{{cdnImages.forwardIcon}}" alt="ÂâçËøõ30Áßí" class="icon"></image>
      </view>

      <!-- ËØÑËÆ∫ÊåâÈíÆ -->
      <view class="control-btn" bindtap="handleComment">
        <image src="{{cdnImages.commentIcon}}" alt="ËØÑËÆ∫" class="icon"></image>
      </view>
    </view>

    <!-- Êõ¥Â§öÊìç‰ΩúÊåâÈíÆ -->
    <view class="more-actions">
      <view class="more-btn" bindtap="handleMore">
        <text>‚ãØ</text>
      </view>
    </view>
    </swiper-item>
    </swiper>
  </view>

  <!-- Âä†ËΩΩÊåáÁ§∫Âô® -->
  <view wx:if="{{loading}}" class="loading-indicator">
    <image src="{{cdnImages.loadingIcon}}" class="loading-icon"></image>
    <text>Âä†ËΩΩ‰∏≠...</text>
  </view>

  <!-- ÂΩìÊ≤°ÊúâÊï∞ÊçÆÊó∂ÊòæÁ§∫ÁöÑÂÜÖÂÆπ -->
  <view wx:if="{{!loading && podcastList.length === 0}}" class="no-data-indicator">
    <text>ÊöÇÊó†Êí≠ÂÆ¢ÂÜÖÂÆπ</text>
  </view>
</view>